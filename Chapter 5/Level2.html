<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chapter 5 â€“ Level 2: Hour/Minute</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(to bottom, #74b9ff 0%, #f0f9ff 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        h1 {
            margin-top: 50px;
            font-size: 36px;
            color: #004d7f;
            text-shadow: 1px 1px 3px rgba(255, 255, 255, 0.9);
        }

        #clockContainer {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 40px 0;
            border: 8px solid #ffde54;
            border-radius: 50%;
            background: radial-gradient(circle, #ffffff 0%, #d0f0ff 100%);
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
        }

        #clockNumbers div {
            position: absolute;
            font-weight: 800;
            color: #004d7f;
            font-size: 20px;
            user-select: none;
        }

        .hand {
            position: absolute;
            top: 50%;
            left: 50%;
            transform-origin: 0% 50%;
            border-radius: 4px;
            transition: transform 0.5s ease-in-out;
        }

        .hour {
            width: 40%;
            height: 6px;
            background: #004d7f;
        }

        .minute {
            width: 48%;
            height: 3px;
            background: #e63946;
        }

        #centerDot {
            position: absolute;
            width: 12px;
            height: 12px;
            background: #004d7f;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        #question {
            font-size: 22px;
            color: #004d7f;
            margin-bottom: 20px;
            font-weight: 700;
        }

        #answers {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .answer-btn {
            padding: 15px 25px;
            background: linear-gradient(145deg, #ffd60a, #ffb703);
            border-radius: 12px;
            border: 3px solid #fff;
            font-weight: 700;
            font-size: 18px;
            color: #a55a00;
            cursor: pointer;
            transition: all 0.2s;
            min-width: 120px;
            text-align: center;
        }

        .answer-btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        #feedback {
            font-size: 24px;
            font-weight: 700;
            min-height: 35px;
            margin-bottom: 20px;
        }

        #nextBtn {
            padding: 12px 28px;
            background: linear-gradient(145deg, #06d6a0, #1b9aaa);
            border: none;
            border-radius: 10px;
            color: #004d7f;
            font-size: 20px;
            font-weight: 700;
            cursor: pointer;
            display: none;
        }

        #nextBtn:hover {
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <h1>Level 2 â€“ Hour/Minute Recognition</h1>

    <div id="clockContainer">
        <div id="clockNumbers"></div>
        <div class="hand hour" id="hourHand"></div>
        <div class="hand minute" id="minuteHand"></div>
        <div id="centerDot"></div>
    </div>

    <div id="question">What time is shown on the clock?</div>
    <div id="answers"></div>
    <div id="feedback"></div>
    <button id="nextBtn" onclick="nextQuestion()">Next</button>

    <script>
        const totalQuestions = 5;
        let current = 0;
        let score = 0;

        const clockNumbersContainer = document.getElementById("clockNumbers");
        const clockRadius = 150;

        // Draw numbers 1-12
        for (let i = 1; i <= 12; i++) {
            const angle = (i * 30 - 90) * Math.PI / 180; // Shift -90Â° to top
            const x = clockRadius + Math.cos(angle) * (clockRadius - 30);
            const y = clockRadius + Math.sin(angle) * (clockRadius - 30);
            const numDiv = document.createElement('div');
            numDiv.style.left = `${x - 10}px`;
            numDiv.style.top = `${y - 10}px`;
            numDiv.innerText = i;
            clockNumbersContainer.appendChild(numDiv);
        }

        function getRandomTime() {
            const hour = Math.floor(Math.random() * 12) + 1;
            const minute = [0, 15, 30, 45][Math.floor(Math.random() * 4)];
            return { hour, minute };
        }

        function rotateHands(hour, minute) {
            const h = hour % 12;
            const hourDeg = (h * 30) + (minute * 0.5) - 90; // Hour hand
            const minuteDeg = (minute * 6) - 90; // Minute hand
            document.getElementById("hourHand").style.transform = `rotate(${hourDeg}deg)`;
            document.getElementById("minuteHand").style.transform = `rotate(${minuteDeg}deg)`;
        }

        function formatTime(h, m) {
            return `${h}:${m.toString().padStart(2, '0')}`;
        }

        function generateOptions(correctHour, correctMinute) {
            const options = [];
            const correctText = formatTime(correctHour, correctMinute);
            options.push(correctText);

            while (options.length < 4) {
                const hour = Math.floor(Math.random() * 12) + 1;
                const minute = [0, 15, 30, 45][Math.floor(Math.random() * 4)];
                const text = formatTime(hour, minute);
                if (!options.includes(text)) options.push(text);
            }
            return options.sort(() => Math.random() - 0.5);
        }

        function loadQuestion() {
            document.getElementById("feedback").innerText = '';
            document.getElementById("nextBtn").style.display = 'none';

            const time = getRandomTime();
            rotateHands(time.hour, time.minute);

            const options = generateOptions(time.hour, time.minute);
            const answersDiv = document.getElementById("answers");
            answersDiv.innerHTML = '';

            options.forEach(opt => {
                const btn = document.createElement('div');
                btn.className = 'answer-btn';
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(opt, time);
                answersDiv.appendChild(btn);
            });
        }

        function checkAnswer(selected, correctTime) {
            const correctText = formatTime(correctTime.hour, correctTime.minute);
            Array.from(document.getElementsByClassName('answer-btn')).forEach(btn => btn.onclick = null);

            if (selected === correctText) {
                document.getElementById("feedback").innerText = `âœ… Correct!`;
                document.getElementById("feedback").style.color = '#06d6a0';
                score++;
            } else {
                document.getElementById("feedback").innerText = `âŒ Wrong! Correct: ${correctText}`;
                document.getElementById("feedback").style.color = '#e63946';
            }
            document.getElementById("nextBtn").style.display = 'inline-block';
        }

        function nextQuestion() {
            current++;
            if (current >= totalQuestions) {
                alert(`ðŸŽ‰ Level 2 Completed! Score: ${score}/${totalQuestions}`);
                localStorage.setItem("C5_Level2", "completed");
                window.location.href = "C5.html"; // Return to chapter page
            } else {
                loadQuestion();
            }
        }

        window.onload = loadQuestion;
    </script>
</body>
</html>
